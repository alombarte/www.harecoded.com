+++
date = "2012-03-23 15:06:00"
author = "alombarte"
title = "Autocompletar hosts al escribir ssh en la terminal"
slug = "autocompletar-hosts-al-escribir-ssh-terminal-1692010"
tags = [ "bash","mac","terminal","trucos" ]
+++
<p>
  Esta mañana mi compañero Borja me ha enseñado un pequeño truquito
  para olvidarse de los bookmarks en la terminal. Se trata de
  <strong>autocompletar el comando <code>ssh</code> con los hosts
  conocidos</strong>.
</p>
<p>
  De este modo, cuando escribes ssh en la terminal puedes darle al
  tabulador para que sugiera o escriba el resto de host por ti.
  Ejemplo:
</p>
<p>
  <a class="thickbox" href=  "/img/posts/4f6c6a77afcd8s23000.jpg"  alt=" - " align="center"></a>
</p>
<p>
  Existen múltiples maneras de hacer esto, leyendo configs con
  puertos y otras barbaridades, pero esta es realmente simple y
  efectiva y sin duda la que más me gusta. Lo que hace es leer el
  fichero de hosts conocidos (<code>~/.ssh/known_hosts</code>) y
  sugerirlos en el autocomplete. Por si no recuerdas qué guarda ese
  fichero son todos aquellos servidores que verificaste a la
  pregunta tipo:
</p>
<pre>
The authenticity of host 'manolete (172.22.195.142)' can't be established.<br>RSA key fingerprint is 7d:00:92:5f:c9:2b:c7:f2:37:fc:5e:40:ce:0e:4d:d1.<br>Are you sure you want to continue connecting (yes/no)?
</pre>
<p>
  El comando, que deberías copiar y pegar en tu
  <code>~/.bash_profile</code> es este:
</p>
<pre>
complete -W "$(while read line; do echo ${line%%[, ]*}; done \<br>&lt; ~/.ssh/known_hosts)" ssh
</pre>
<p>
  <strong>Ojo, esta es la versión de Mac.</strong>
</p>
<p>
  A ahorrar tiempo!
</p>