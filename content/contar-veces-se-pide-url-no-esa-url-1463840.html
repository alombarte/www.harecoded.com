+++
date = "2012-02-14 20:14:00"
author = "alombarte"
title = "Contar veces que se pide una URL (y las que no es esa URL)"
slug = "contar-veces-se-pide-url-no-esa-url-1463840"
tags = [ "apache","bash","linux","trucos" ]
+++
<p>
  Hay veces que queremos saber <strong>cuántas veces se ha pedido
  una URL</strong> en nuestro servidor y Google Analytics o otro
  servicio de monitorización basado en Javascript no está
  disponible. Entonces siempre podemos recurrir a la fuente
  original de datos, los logs de acceso (esos gran incomprendidos y
  frecuentemente abandonados) de Apache, Nginx o donde sea.
</p>
<p>
  Si por ejemplo queremos saber cuántas veces se ha pedido la
  página /abc.html en el mes de febrero (2012_02) y tenemos los
  logs segmentados por día, será tan sencillo como lanzar un:
</p>
<pre>
grep -c  "GET /abc.html" /var/log/apache/access_2012_02_*
</pre>
<p>
  Similarmente, podemos obtener el número de peticiones que NO
  contienen esa petición añadiendo el parámetro
  <strong>-v</strong>:
</p>
<pre>
grep -vc  "GET /abc.html" /var/log/apache/access_2012_02_*
</pre>
<p>
  La ubicación exacta de los blogs está declarada en vuestra
  configuración de Apache o Virtualhosts bajo la directiva <a href=  "http://httpd.apache.org/docs/2.0/logs.html#accesslog">AccessLog</a>.
</p>