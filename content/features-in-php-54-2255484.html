+++
date = "2013-03-07 12:19:00"
author = "alombarte"
title = "Features in PHP 5.4"
slug = "features-in-php-54-2255484"
tags = [ "development","php" ]
+++
<p>
  <img style=  "display: block; margin-left: auto; margin-right: auto;" title=  "Source: National Geographic website" src=  "/img/posts/513882d7d9596s55348.jpg"  alt=" - ">
</p>
<p>
  We had to create a file upload form that allows a user to upload
  big files. In order to keep a good experience for the user we
  decided to show the progress bars.
</p>
<p>
  There are several ways of doing that but it came to my mind that
  <strong>PHP 5.4</strong> had an improvement on file upload,
  making it easier now and wondered if I had the last excuse to
  upgrade the servers from 5.3 to 5.4.
</p>
<p>
  This is a list of some of the features PHP 5.4 comes with. There
  are more, but I came here with the intention of speaking about
  the ones that they care to me. This is not a 5.4 review, but
  <strong>examples</strong>.
</p>
<h3>
  Session upload progress
</h3>
<p>
  I already mentioned it, PHP 5.4 will be handy because now you can
  ask the server in realtime how the <a href=  "http://www.php.net/manual/en/session.upload-progress.php">upload
  progress</a>&nbsp;is going. Mixed with HTML5 you can have a
  kicking-ass upload form.
</p>
<h3>
  Speed
</h3>
<p>
  It seems that PHP 5.4 is faster than its ancestry, and I say that
  it seems because even there are plenty of sites claiming that I
  still have not run any benchmarks with my app.
</p>
<h3>
  Traits
</h3>
<p>
  Kids deserve &nbsp;a candy sometime. We have regret many times
  using PHP because unlike other languages there has never been
  multiple inheritance. Now PHP gives us a sugar-free candy to
  mitigate this. Traits are not the multiple inheritane but might
  help you out sharing common functionallity between classes. And
  traits can use traits. This is an example of how a simple trait
  would work:
</p>
<pre>
&lt;?php
namespace Mammal\Primate;

trait Feeding
{
        public function getDiet( $age )
        {
                if ( $age &lt; 3 )
                {
                        return [ 'breastfed' ];
                }
                else
                {
                        return [ 'fruit', 'leaves', 'flowers', 'buds', 'nectar', 'seeds', 'insects', 'bird eggs' ];
                }
        }
}
</pre>
<p>
  Then your trait can be attached to any class like this, no matter
  if your class already extends something else:
</p>
<pre>
class Gorilla extends VertebrateKingdom implements Animalia
{
        use \Mammal\Primate\Feeding;
        // ...
}
</pre>
<p>
  Now you can use the trait methods directly:
</p>
<pre>
$gorilla = new Gorilla();
$gorilla-&gt;getDiet( 5 );
</pre>
<h3>
  Python-alike stuff: lists and anonymous functions
</h3>
<p>
  Being a former pythonist I'm glad to have these two back in town:
</p>
<h3>
  Anonymous functions
</h3>
<p>
  Create functions on the fly:&nbsp;
</p>
<pre>
$dump = function( $var ) { var_dump( $var ) ; };
$dump( $gorilla-&gt;getDiet( 5 ) ); // Array containing 'fruit', 'leaves'...
</pre>
<h3>
  Short array syntax
</h3>
<p>
  This is the same format than <strong>python lists</strong>, and
  the ability to get rid of temporary variables:
</p>
<pre>
// Before: PHP &lt; 5.3:

function getMammals()
{
        return array( 'monkey', 'zebra', 'dolphin', 'cat', 'John' );
}

$mammals = getMammals();
echo $mammals[0];

// Now: PHP 5.4+
function getMammals()
{
        $mammals = [ 'monkey', 'zebra', 'dolphin', 'cat', 'John' ];
}

echo getMammals()[0]; // Look that you don't need the temp variable anymore
</pre>
<h3>
  Webserver
</h3>
<p>
  Finally, now you can run a debugging server without the need
  apache:
</p>
<pre>
 php -S localhost:8080 -t /var/www/tests
</pre>
<p>
  Not very useful in my case scenario where I have a full virtual
  environment with puppet and so on, but maybe for running
  temporary scripts might be useful. With earlier versions remind
  that you can always execute inline PHP from command line like
  this:
</p>
<p>
  <code>php -r "phpinfo();"</code>
</p>
<h3>
  Yeah!!!
</h3>